<section class="section">
  <div class="columns is-centered">
    <div class="column is-narrow">
      <%= link_to "Create a Club", new_club_path, class: "button is-link" %>
    </div>
  </div>
  <div class="columns is-centered">
    <div class="column is-half box">
      <table class="table is-fullwidth is-centered has-text-centered">
        <thead>
          <th>Name</th>
          <th>Admin</th>
          <th>Member</th>
        </thead>
        <tbody>
          <% @clubs.each do |club| %>
            <tr>
              <td><%= link_to club.name, club_path(club) %></td>
              <td><%= club.admin?(current_user) %></td>
              <% if club.users.include?(current_user) %>
                <td>Nice</td>
              <% elsif club.pending_request?(current_user) %>
                <td>
                  <%= button_to "Cancel Join Request",
                    club_request_path(club.pending_request(current_user).id),
                    method: :delete,
                    remote: true,
                    class: "button is-danger" %>
                </td>
              <% else %>
                <td>
                  <%= button_to "Request to Join",
                    club_requests_path,
                    params: { "club_request[user_id]" => current_user.id,
                              "club_request[club_id]" => club.id },
                    remote: true,
                    class: "button is-link" %>
                </td>
              <% end %>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</section>
